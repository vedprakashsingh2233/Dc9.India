
@{
    ViewBag.Title = "Cart";
    Layout = "~/Views/Shared/_LayOut.cshtml";
}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<section class="wow fadeIn cover-background background-position-top top-space">
    <div class="opacity-medium bg-extra-dark-gray"></div>
    <div class="container">

    </div>
</section>
<!-- start breadcrumb section -->
<section class="wow fadeIn padding-20px-tb border-bottom border-color-extra-light-gray">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-12 text-left px-0">
                <div class="breadcrumb alt-font text-small mb-0">
                    <!-- breadcrumb -->
                    <ul>
                        <li><a href="#" class="text-medium-gray">Plans</a></li>
                        <li class="text-medium-gray">Cart</li>
                    </ul>
                    <!-- end breadcrumb -->
                </div>
            </div>
        </div>
    </div>
</section>
<!-- end breadcrumb section -->
<section class="wow fadeIn">
    <div class="container">

        <div class="row">
            <!-- start column -->
            <div class="col-12 col-lg-8 md-margin-15px-bottom" style="height:400px;overflow-y:auto">
                <h5 class="text-extra-dark-gray alt-font font-weight-600">Shopping Cart</h5>
                <div class=" col-lg-12 mb-2">
                    <div class="row bg-light-gray border-radius-6 m-1 p-2">
                        <div class="col-sm-9 font-weight-500"><span id="txtPlan">Basic</span></div>
                        <div class="col-sm-3 font-weight-500">₹ <span id="txtPrice">9999</span> /<span id="txtPlanType">month</span></div>
                        <div class="col-sm-12">
                            <a data-toggle="collapse" href="#accordion-one-link1" aria-expanded="false" class="">
                                <div class=" font-weight-500  position-relative padding-20px-right">
                                    <span>
                                       Details <i class="fas fa-angle-down"></i>
                                    </span>
                                </div>
                            </a>
                        </div>
                        <div id="accordion-one-link1" class="panel-collapse collapse p-5">
                          
                            <div class="panel-body">
                                <span class="text-extra-dark-gray font-weight-400" id="txt">Grand Total </span><br />
                                <span class="text-extra-dark-gray font-weight-400">Grand Total </span><br />
                                <span class="text-extra-dark-gray font-weight-400">Grand Total </span><br />
                                <span class="text-extra-dark-gray font-weight-400">Grand Total </span><br />
                                <span class="text-extra-dark-gray font-weight-400">Grand Total </span><br />
                                <span class="text-extra-dark-gray font-weight-400">Grand Total </span><br />
                                <span class="text-extra-dark-gray font-weight-400">Grand Total </span><br />
                                <span class="text-extra-dark-gray font-weight-400">Grand Total </span><br />
                                
                            </div>
                               
                            
                        </div>

                    </div>
                  
                </div>
                <div class=" col-lg-12  ">
                    <div class="bg-light-gray border-radius-6 padding-40px-all sm-padding-30px-all last-paragraph-no-margin">
                        <p class="">Additional Plans</p>
                        <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.</p>
                    </div>
                </div>
            </div>
            <!-- end column -->
            <!-- start column -->
            <div class="col-12 col-lg-4 md-margin-15px-bottom  ">
                <div class="bg-light-gray padding-40px-all sm-padding-30px-all border-radius-6 last-paragraph-no-margin">
                    <h6 class="text-extra-dark-gray alt-font font-weight-600 ">Order Summary</h6>


                    <div class="row">
                        <div class="col-sm-9">

                            <span class="text-extra-dark-gray font-weight-400">Billed every month  </span>
                        </div>
                        <div class="col-sm-3">
                            <span class="text-extra-dark-gray sm-text-left">₹ 0</span>

                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-sm-9">
                            <span class="text-extra-dark-gray font-weight-400">Adtitional Plan Amount </span>

                        </div>
                        <div class="col-sm-3">
                            <span class="text-extra-dark-gray sm-text-left">₹ 0</span>

                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-sm-9">

                            <span class="text-extra-dark-gray font-weight-400">Subtotal </span>
                        </div>
                        <div class="col-sm-3">
                            <span class="text-extra-dark-gray sm-text-left">₹ 0</span>

                        </div>
                    </div>
                    <hr />
                    <div class="row mt-3">
                        <div class="col-sm-9">

                            <span class="text-extra-dark-gray font-weight-400">Grand Total </span>
                        </div>
                        <div class="col-sm-3">
                            <span class="text-extra-dark-gray sm-text-left">₹ 0</span>

                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 col-12 text-center btn-dual justify-content-center mt-3">
                            <!-- start buttons -->
                            <a class="btn btn-extra-large btn-dark-gray btn-rounded lg-margin-15px-bottom d-table d-lg-inline-block md-margin-lr-auto" href="#">Checkout</a>

                        </div>
                    </div>
                </div>
            </div>
            <!-- end column -->
        </div>
    </div>
</section>
@*<style>

    $color-border: #eee;
    $color-label: #aaa;
    $font-default: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue",
      Helvetica, Arial, sans-serif;
    $font-bold: "HelveticaNeue-Medium", "Helvetica Neue Medium";

    /* Global "table" column settings */
    .product-image {
      float: left;
      width: 20%;
    }
    .product-details {
      float: left;
      width: 37%;
    }
    .product-price {
      float: left;
      width: 12%;
    }
    .product-quantity {
      float: left;
      width: 10%;
    }
    .product-removal {
      float: left;
      width: 9%;
    }
    .product-line-price {
      float: left;
      width: 12%;
      text-align: right;
    }

    /* This is used as the traditional .clearfix class */
    .group:before,
    .group:after {
      content: "";
      display: table;
    }
    .group:after {
      clear: both;
    }
    .group {
      zoom: 1;
    }

    /* Apply clearfix in a few places */
    .shopping-cart,
    .column-labels,
    .product,
    .totals-item {
     @@extend .group;
    }

    /* Apply dollar signs */
        .product .product-price:before,
        .product .product-line-price:before,
        .totals-value:before {
            content: "₹";
        }

    /* Body/Header stuff */
    body {
      padding: 0px 30px 30px 20px;
      font-family: $font-default;
      font-weight: 100;
    }

    h1 {
      font-weight: 100;
    }

    label {
      color: $color-label;
    }

    .shopping-cart {
      margin-top: -45px;
    }

    /* Column headers */
    .column-labels {
      label {
        padding-bottom: 15px;
        margin-bottom: 15px;
        border-bottom: 1px solid $color-border;
      }

      .product-image,
      .product-details,
      .product-removal {
        text-indent: -9999px;
      }
    }

    /* Product entries */
    .product {
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 1px solid $color-border;

      .product-image {
        text-align: center;
        img {
          width: 100px;
        }
      }

      .product-details {
        .product-title {
          margin-right: 20px;
          font-family: $font-bold;
        }
        .product-description {
          margin: 5px 20px 5px 0;
          line-height: 1.4em;
        }
      }

      .product-quantity {
        input {
          width: 40px;
        }
      }

      .remove-product {
        border: 0;
        padding: 4px 8px;
        background-color: #c66;
        color: #fff;
        font-family: $font-bold;
        font-size: 12px;
        border-radius: 3px;
      }

      .remove-product:hover {
        background-color: #a44;
      }
    }

    /* Totals section */
    .totals {
      .totals-item {
        float: right;
        clear: both;
        width: 100%;
        margin-bottom: 10px;

        label {
          float: left;
          clear: both;
          width: 79%;
          text-align: right;
        }

        .totals-value {
          float: right;
          width: 21%;
          text-align: right;
        }
      }

      .totals-item-total {
        font-family: $font-bold;
      }
    }

    .checkout {
      float: right;
      border: 0;
      margin-top: 20px;
      padding: 6px 25px;
      background-color: #6b6;
      color: #fff;
      font-size: 25px;
      border-radius: 3px;
    }

    .checkout:hover {
      background-color: #494;
    }

    /* Make adjustments for tablet */
    @@media screen and (max-width: 650px) {
      .shopping-cart {
        margin: 0;
        padding-top: 20px;
        border-top: 1px solid $color-border;
      }

      .column-labels {
        display: none;
      }

      .product-image {
        float: right;
        width: auto;
        img {
          margin: 0 0 10px 10px;
        }
      }

      .product-details {
        float: none;
        margin-bottom: 10px;
        width: auto;
      }

      .product-price {
        clear: both;
        width: 70px;
      }

      .product-quantity {
        width: 100px;
        input {
          margin-left: 20px;
        }
      }

      .product-quantity:before {
        content: "x";
      }

      .product-removal {
        width: auto;
      }

      .product-line-price {
        float: right;
        width: 70px;
      }
    }

    /* Make more adjustments for phone */
    @@media screen and (max-width: 350px) {
      .product-removal {
        float: right;
      }

      .product-line-price {
        float: right;
        clear: left;
        width: auto;
        margin-top: 10px;
      }

      .product .product-line-price:before {
        content: "Item Total: $";
      }

      .totals {
        .totals-item {
          label {
            width: 60%;
          }

          .totals-value {
            width: 40%;
          }
        }
      }
    }

    </style>


    <h1>Your Plan Cart</h1>

    <div class="shopping-cart">

        <div class="column-labels">

            <label class="product-details">Product</label>
            <label class="product-price">Price</label>

            <label class="product-removal">Remove</label>
            <label class="product-line-price">Total</label>
        </div>

        <div class="product">

            <div class="product-details">
                <div class="product-title" id="txtPlanName"></div>
                <p class="product-description">Bandwidth : <span id="txtBandwidth"></span> ,&nbsp;&nbsp;Dedicated IP's : <span id="txtDedicatedIP"></span></p>
            </div>
            <div class="product-price"><span id="txtPrice"></span> / <span id="txtPriceType"></span></div>

            <div class="product-removal">
                <button class="remove-product" onclick="history.back()">
                    Back To Plans
                </button>
            </div>
            <div class="product-line-price" id="product-line-price"></div>
        </div>



        <div class="totals">
            <div class="totals-item">
                <label>Subtotal</label>
                <div class="totals-value" id="cart-subtotal">71.97</div>
            </div>

            <div class="totals-item">
                <label>Additional Item</label>
                <div class="totals-value" id="cart-shipping">15.00</div>
            </div>
            <div class="totals-item totals-item-total">
                <label>Grand Total</label>
                <div class="totals-value" id="cart-total">90.57</div>
            </div>
        </div>

        <button class="checkout">Checkout</button>

    </div>
    <h2 style="margin-top:100px;">Additional Item</h2>
    <div id="divAdditionalItem" >

    </div>
    <div>
        <select id="ddlTenure"></select>
        <input type="text"  id="txtTenure" value="0" disabled style="display:none;" />
    </div>*@
<script>
    /* Set rates + misc */

    var shippingRate = 15.0;
    var fadeTime = 300;

    /* Assign actions */
    $(".product-quantity txtPrice").change(function () {
        //updateQuantity(this);
    });


    $(".product-removal button").click(function () {
        removeItem(this);
    });

    /* Recalculate cart */
    function recalculateCart() {
        var subtotal = 0;

        /* Sum up row totals */

        subtotal += parseFloat($("#txtPrice").text());


        /* Calculate totals */
        var shipping = subtotal > 0 ? shippingRate : 0;
        var total = subtotal + shipping;

        /* Update totals display */
        $(".totals-value").fadeOut(fadeTime, function () {
            $("#cart-subtotal").html(subtotal.toFixed(2));
            $("#cart-shipping").html(shipping.toFixed(2));
            $("#cart-total").html(total.toFixed(2));
            if (total == 0) {
                $(".checkout").fadeOut(fadeTime);
            } else {
                $(".checkout").fadeIn(fadeTime);
            }
            $(".totals-value").fadeIn(fadeTime);
        });
    }

    /* Update quantity */
    function updateQuantity(quantityInput) {
        /* Calculate line price */
        var productRow = $(quantityInput).parent().parent();
        var price = parseFloat(productRow.children(".product-price").text());
        var quantity = $(quantityInput).val();
        var linePrice = price * quantity;

        /* Update line price display and recalc cart totals */
        productRow.children(".product-line-price").each(function () {
            $(this).fadeOut(fadeTime, function () {
                $(this).text(linePrice.toFixed(2));
                recalculateCart();
                $(this).fadeIn(fadeTime);
            });
        });
    }

    /* Remove item from cart */
    function removeItem(removeButton) {
        /* Remove row from DOM and recalc cart total */
        var productRow = $(removeButton).parent().parent();
        productRow.slideUp(fadeTime, function () {
            productRow.remove();
            recalculateCart();
        });
    }

</script>
<script>
    var additionalItem = [];
    $(document).ready(function () {

        // Event handler for checkbox change
        $('.chkAddtional').change(function () {
            let item = $(this).val();
            let price = $(this).closest('.item').find('.AddtionalPrice').text();
            if ($(this).is(':checked')) {
                // If checked

                let items = {
                    item: item,
                    price: price
                };
                additionalItem.push(items);
                AddPricing();
            } else {
                additionalItem = additionalItem.filter(function (items) {
                    return items.item !== item;
                });
                AddPricing();
            }
        });
        BindAdditionaltem();
        BindTanure();
        var queryString = window.location.search; // "?SC=5"

        // Use URLSearchParams to parse the query string
        var urlParams = new URLSearchParams(queryString);

        // Get the value of the 'SC' parameter
        var id = urlParams.get('id');
        BindPlanDetail(id);
        //recalculateCart();
        $("#ddlTenure").change(function () {
            $("#txtTenure").show();
            $("#txtTenure").val($(this).val());
        });
        $("#divAdditionalItem.chkAddtional").change(function () {
            alert("hello");
        })
    });
    function AddPricing() {
        var html = '';
        var Tprice = 0;
        $("#divAdditionalItems").html('');
        var VpsPrice = $("#Vpsprice").text();
        if (additionalItem.length > 0) {
            additionalItem.forEach(function (items) {
                html += '<label class="text-extra-dark-gray mr-2">' + items.item + '</label><span class="text-extra-dark-gray">$' + items.price + '</span><br />';
                Tprice += parseFloat(items.price);
            });
            $("#divAdditionalItems").html(html)
        }
        $("#totalPrice").text('$' + (parseFloat(VpsPrice) + Tprice));
    }
    function Checkout(id) {
        $(window.location).attr("href", "/Vpshosting/checkout?id=" + id);
    }
    function BindAdditionaltem() {
        $.post("/Vpshosting/BindAdditionaltem",
            {},
            function (data) {
                if (data.Result == "") {
                    $("#divAdditionalItem").html(data.Data);

                }
                else {
                    alert(data.Result);
                }
            });
    }
    function BindPlanDetail(Id) {
        $.post("/Admin/EditPlan",
            { Id: Id },
            function (data) {
                if (data.Result == "") {
                    var Data = JSON.parse(data.Record);
                    $.each(Data, function (index, Value) {
                        $('#hdId').val(Value.Id);
                        $('#txtPlan').text(Value.PlanName);
                        $('#txtPrice').text(parseFloat(Value.Price).toFixed(2));
                        $('#product-line-price').text(parseFloat(Value.Price).toFixed(2));
                        $('#txtPriceType').text(Value.PriceType);
                        $('#txtDedicatedIP').text(Value.DedicatedIP);
                        $('#txtBandwidth').text(Value.Bandwidth);

                    });
                }
                else {
                    alert(data.Result);
                }
            });
    }
    function BindTanure() {
        $.post("/Admin/ShowDiscountList",
            {},
            function (data) {
                var jsonData = JSON.parse(data.Data);
                $('#ddlTenure').html("").append('<option value="0">Select Tenure</option>');
                $(jsonData).each(function () {
                    $('#ddlTenure').append('<option value=' + this.PercentageAmount + '>' + this.DiscountName + '</option>');
                });
            }).fail(function (edata) {
                alert("error while feching record.");
            });
    };
</script>
